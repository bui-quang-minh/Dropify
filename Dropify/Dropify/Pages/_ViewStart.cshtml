@using Dropify.Logics
@{
    // Check if user_email is present in session
    var userEmail = Context.Session.GetString("user_email");

    if (!string.IsNullOrEmpty(userEmail))
    {
        // User is logged in, check authorization
        var userDAO = new UserDAO();
        var isAdmin = userDAO.Authorization(userEmail);

        if (isAdmin)
        {
            // User is an admin, use _AdminLayout
            Layout = "_AdminLayout";
            System.Diagnostics.Debug.WriteLine("Using _AdminLayout");
        }
        else
        {
            // User is not an admin, use _Layout
            Layout = "_Layout";
            System.Diagnostics.Debug.WriteLine("Using _Layout");
        }
    }
    else
    {
        // User is not logged in, use default layout
        Layout = null;
        System.Diagnostics.Debug.WriteLine("Using no layout (User not logged in)");
    }
}
